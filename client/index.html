<!DOCTYPE html>
<html>

<body>
    <script>
        const ws = new WebSocket('ws://localhost:4000/connect')
        var i = 0;
        ws.onopen = () => {
            console.log('ws opened on browser')
            setInterval(function () {
                var messageData = '[2,"123","hello","hello world' + (i++) + '"]'
                ws.send(messageData)
                //console.log('message sent: ', messageData)
            }, 1);
        }

        ws.onmessage = (message) => {
            console.log(message.data)
            var msg = JSON.parse(message.data)
            if (msg[0] == 2) {
                ws.send(JSON.stringify([3, "123", msg[3]]))
            }
        }

    </script>
</body>

</html>